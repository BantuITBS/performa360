<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="South Africa Leave Management and Privacy Policy" />
  <title>South Africa Leave Management</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    :root {
      --primary: #3498db;
      --primary-dark: #2980b9;
      --secondary: #2c3e50;
      --secondary-light: #34495e;
      --accent: #e74c3c;
      --light: #ecf0f1;
      --dark: #2c3e50;
      --gray: #95a5a6;
      --success: #2ecc71;
      --monthly-color: #f1c40f;
      --weekly-color: #e67e22;
      --prev3months-color: #9b59b6;
      --next3months-color: #3498db;
      --prev6months-color: #1abc9c;
      --next6months-color: #2ecc71;
      --annual-color: #e74c3c;
    }
    
    body {
      font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      min-height: 100vh;
      background-color: #f8f9fa;
      color: #333;
      line-height: 1.6;
    }
    
    .sidebar {
      width: 280px;
      background-color: var(--secondary);
      color: white;
      padding: 30px 20px;
      overflow-y: auto;
      box-shadow: 2px 0 10px rgba(0,0,0,0.1);
    }
    
    .sidebar h2 {
      margin-top: 0;
      font-size: 1.4rem;
      margin-bottom: 30px;
      padding-bottom: 15px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      color: var(--light);
    }
    
    .sidebar button {
      display: block;
      background: none;
      color: rgba(255,255,255,0.9);
      border: none;
      text-align: left;
      padding: 12px 15px;
      cursor: pointer;
      width: 100%;
      margin: 5px 0;
      border-radius: 5px;
      transition: all 0.3s ease;
      font-size: 0.95rem;
    }
    
    .sidebar button:hover {
      background-color: var(--secondary-light);
      transform: translateX(5px);
    }
    
    .sidebar button:active {
      transform: translateX(5px) scale(0.98);
    }
    
    .sidebar button.active {
      background-color: var(--primary);
      font-weight: 500;
    }
    
    .main {
      flex: 1;
      padding: 40px;
      overflow-y: auto;
      background-color: white;
      display: flex;
      flex-direction: column;
    }
    
    .policy-brief {
      text-align: center;
      max-width: 600px;
      padding: 40px;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      transform-style: preserve-3d;
      transition: all 0.5s ease;
      margin: 0 auto;
    }
    
    .policy-brief:hover {
      transform: translateY(-5px) scale(1.01);
      box-shadow: 0 15px 35px rgba(0,0,0,0.15);
    }
    
    .policy-brief h1 {
      font-size: 2.5rem;
      color: var(--secondary);
      margin-bottom: 20px;
      background: linear-gradient(to right, var(--primary-dark), var(--primary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      position: relative;
    }
    
    .policy-brief h1::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 4px;
      background: linear-gradient(to right, var(--primary), var(--primary-dark));
      border-radius: 2px;
    }
    
    .policy-brief p {
      font-size: 1.1rem;
      color: var(--secondary-light);
      margin-bottom: 0;
    }
    
    .policy-content {
      width: 100%;
      display: none;
      animation: fadeIn 0.5s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .policy-content h2 {
      color: var(--secondary);
      margin-top: 0;
      font-size: 1.8rem;
      padding-bottom: 10px;
      border-bottom: 2px solid var(--light);
    }
    
    .policy-content h3 {
      color: var(--primary-dark);
      margin-top: 25px;
      font-size: 1.3rem;
    }
    
    .policy-content p, .policy-content ul {
      color: #444;
      font-size: 1rem;
      margin-bottom: 15px;
    }
    
    .policy-content ul {
      padding-left: 20px;
    }
    
    .policy-content li {
      margin-bottom: 8px;
    }
    
    /* Leave Grid Styles */
    .leave-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin: 25px 0;
    }
    
    .leave-card {
      background: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
      transition: transform 0.3s ease;
    }
    
    .leave-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    }
    
    .leave-card h3 {
      margin-top: 0;
      color: var(--secondary);
      border-bottom: 1px solid #eee;
      padding-bottom: 10px;
    }
    
    .leave-stats {
      display: flex;
      justify-content: space-between;
      margin-bottom: 15px;
    }
    
    .stat {
      text-align: center;
    }
    
    .stat-value {
      font-size: 1.8rem;
      font-weight: bold;
      color: var(--primary);
    }
    
    .stat-label {
      font-size: 0.9rem;
      color: var(--gray);
    }
    
    .progress-bar {
      height: 10px;
      background: #eee;
      border-radius: 5px;
      margin: 15px 0;
      overflow: hidden;
    }
    
    .progress {
      height: 100%;
      background: var(--primary);
      border-radius: 5px;
    }
    
    /* Team Leave Grid Styles */
    .team-leave-container {
      margin-top: 30px;
    }
    
    .team-leave-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .team-leave-nav {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    
    .team-leave-nav button {
      padding: 8px 15px;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 0.9rem;
      width: 120px;
      text-align: center;
    }
    
    .team-leave-nav button.monthly {
      background-color: var(--monthly-color);
    }
    .team-leave-nav button.weekly {
      background-color: var(--weekly-color);
    }
    .team-leave-nav button.prev3Months {
      background-color: var(--prev3months-color);
    }
    .team-leave-nav button.next3Months {
      background-color: var(--next3months-color);
    }
    .team-leave-nav button.prev6Months {
      background-color: var(--prev6months-color);
    }
    .team-leave-nav button.next6Months {
      background-color: var(--next6months-color);
    }
    .team-leave-nav button.annual {
      background-color: var(--annual-color);
    }
    
    .team-leave-nav button.active {
      font-weight: 600;
      filter: brightness(85%);
    }
    
    .team-leave-month {
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--secondary);
    }
    
    .team-leave-grid {
      display: grid;
      grid-template-columns: 150px repeat(auto-fit, minmax(80px, 1fr));
      overflow-x: auto;
      border: 1px solid #eee;
      border-radius: 8px;
    }
    
    .team-leave-day-header {
      background-color: var(--secondary);
      color: white;
      padding: 10px;
      text-align: center;
      font-weight: 500;
      position: sticky;
      left: 0;
      z-index: 2;
    }
    
    .team-leave-date-header {
      background-color: #f8f9fa;
      padding: 10px;
      text-align: center;
      font-weight: 500;
      border-bottom: 1px solid #eee;
      font-size: 0.8rem;
      position: relative;
    }
    
    .month-divider {
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 2px;
      background-color: var(--secondary);
    }
    
    .team-leave-employee-row {
      display: contents;
    }
    
    .team-leave-employee-name {
      background-color: white;
      padding: 12px 15px;
      position: sticky;
      left: 0;
      z-index: 1;
      border-bottom: 1px solid #eee;
      font-weight: 500;
    }
    
    .team-leave-box {
      padding: 12px 5px;
      border-bottom: 1px solid #eee;
      border-right: 1px solid #eee;
      text-align: center;
      min-width: 80px;
      min-height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    
    .leave-block {
      background-color: var(--primary);
      color: white;
      padding: 3px 6px;
      border-radius: 4px;
      font-size: 0.8rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      display: inline-block;
      max-width: 100%;
    }
    
    .leave-annual {
      background-color: #3498db;
    }
    
    .leave-maternity {
      background-color: #9b59b6;
    }
    
    .leave-sick {
      background-color: #e74c3c;
    }
    
    .leave-family {
      background-color: #2ecc71;
    }
    
    .leave-pending {
      background-color: #f39c12;
    }
    
    .leave-overlap {
      position: relative;
      z-index: 1;
    }
    
    .leave-overlap::after {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      border: 2px dashed white;
      border-radius: 6px;
      z-index: -1;
    }
    
    .legend {
      display: flex;
      gap: 15px;
      margin-top: 20px;
      flex-wrap: wrap;
    }
    
    .legend-item {
      display: flex;
      align-items: center;
      gap: 5px;
      font-size: 0.9rem;
    }
    
    .legend-color {
      width: 15px;
      height: 15px;
      border-radius: 3px;
    }
    
    /* Privacy Policy Specific Styles */
    .compliance-badge {
      display: inline-block;
      background: #e8f8f0;
      padding: 0.5rem 1rem;
      border-radius: 12px;
      margin: 0.5rem 0.5rem 0.5rem 0;
      font-size: 0.9rem;
      color: var(--success);
    }
    
    .notice {
      background: #f9f9f9;
      padding: 1.5rem;
      border-left: 4px solid var(--primary);
      margin: 2rem 0;
    }
    
    .policy-content a {
      color: var(--primary);
      text-decoration: none;
    }
    
    .policy-content a:hover {
      text-decoration: underline;
    }
    
    [aria-label] {
      cursor: help;
    }
    
    @media (max-width: 1200px) {
      .team-leave-grid {
        grid-template-columns: 120px repeat(auto-fit, minmax(60px, 1fr));
      }
      .team-leave-box {
        min-width: 60px;
      }
    }
    
    @media (max-width: 768px) {
      body {
        flex-direction: column;
      }
      
      .sidebar {
        width: 100%;
        height: auto;
        padding: 20px;
      }
      
      .main {
        padding: 25px;
      }
      
      .policy-brief {
        padding: 30px 20px;
      }
      
      .policy-brief h1 {
        font-size: 2rem;
      }
      
      .leave-grid {
        grid-template-columns: 1fr;
      }
      
      .team-leave-grid {
        grid-template-columns: 100px repeat(auto-fit, minmax(50px, 1fr));
      }
      
      .team-leave-day-header, 
      .team-leave-employee-name {
        font-size: 0.9rem;
        padding: 8px 10px;
      }
      
      .team-leave-box {
        min-width: 50px;
        min-height: 40px;
        font-size: 0.7rem;
      }
      
      .team-leave-date-header {
        font-size: 0.7rem;
      }
      
      .team-leave-nav button {
        width: 100px;
        font-size: 0.8rem;
      }
    }
  </style>
</head>
<body>
  <div class="sidebar">
    <h2>Leave Management</h2>
    <button onclick="showPolicy('yourLeave')">Your Leave</button>
    <button onclick="showPolicy('teamLeave')">Team Leave Grid</button>
    <hr style="border-color: rgba(255,255,255,0.1); margin: 20px 0;">
    <h2>Employment Policies</h2>
    <button onclick="showPolicy('bcea')">Basic Conditions of Employment Act (BCEA)</button>
    <button onclick="showPolicy('lra')">Labour Relations Act (LRA)</button>
    <button onclick="showPolicy('eea')">Employment Equity Act (EEA)</button>
    <button onclick="showPolicy('ohsa')">Occupational Health and Safety Act (OHSA)</button>
    <button onclick="showPolicy('uia')">Unemployment Insurance Act</button>
    <button onclick="showPolicy('company')">Company-specific Policies</button>
    <button onclick="showPolicy('summary')">Summary: What Employees Should Know</button>
    <button onclick="showPolicy('leave')">View Leave Policy</button>
    <button onclick="showPolicy('privacy')">Privacy Policy</button>
  </div>
  <div class="main">
    <div class="policy-brief" id="policyBrief">
      <h1>Leave Management System</h1>
      <p>Select an option from the sidebar to view your leave status, team leave grid, or policies</p>
    </div>
    
    <!-- Your Leave Content -->
    <div class="policy-content" id="yourLeaveContent">
      <h2>Your Leave Balance</h2>
      
      <div class="leave-grid">
        <div class="leave-card">
          <h3>Annual Leave</h3>
          <div class="leave-stats">
            <div class="stat">
              <div class="stat-value">18</div>
              <div class="stat-label">Accrued</div>
            </div>
            <div class="stat">
              <div class="stat-value">7</div>
              <div class="stat-label">Used</div>
            </div>
            <div class="stat">
              <div class="stat-value">11</div>
              <div class="stat-label">Remaining</div>
            </div>
          </div>
          <div class="progress-bar">
            <div class="progress" style="width: 61%"></div>
          </div>
          <p>Next accrual: <span id="annualLeaveAccrualDate"></span></p>
        </div>
        
        <div class="leave-card">
          <h3>Sick Leave</h3>
          <div class="leave-stats">
            <div class="stat">
              <div class="stat-value">10</div>
              <div class="stat-label">Available</div>
            </div>
            <div class="stat">
              <div class="stat-value">2</div>
              <div class="stat-label">Used</div>
            </div>
            <div class="stat">
              <div class="stat-value">8</div>
              <div class="stat-label">Remaining</div>
            </div>
          </div>
          <div class="progress-bar">
            <div class="progress" style="width: 20%"></div>
          </div>
          <p>Cycle resets on <span id="sickLeaveResetDate"></span></p>
        </div>
        
        <div class="leave-card">
          <h3>Family Responsibility</h3>
          <div class="leave-stats">
            <div class="stat">
              <div class="stat-value">3</div>
              <div class="stat-label">Annual</div>
            </div>
            <div class="stat">
              <div class="stat-value">1</div>
              <div class="stat-label">Used</div>
            </div>
            <div class="stat">
              <div class="stat-value">2</div>
              <div class="stat-label">Remaining</div>
            </div>
          </div>
          <div class="progress-bar">
            <div class="progress" style="width: 33%"></div>
          </div>
          <p>Resets on your employment anniversary</p>
        </div>
      </div>
      
      <h3>Your Upcoming Leave</h3>
      <table class="department-table">
        <thead>
          <tr>
            <th>Type</th>
            <th>Dates</th>
            <th>Days</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Annual Leave</td>
            <td><span id="yourLeaveDate1"></span></td>
            <td>5</td>
            <td><span class="status-badge status-planned">Approved</span></td>
          </tr>
          <tr>
            <td>Family Leave</td>
            <td><span id="yourLeaveDate2"></span></td>
            <td>3</td>
            <td><span class="status-badge status-planned">Pending Approval</span></td>
          </tr>
        </tbody>
      </table>
    </div>
    
    <!-- Team Leave Grid -->
    <div class="policy-content" id="teamLeaveContent">
      <h2>Team Leave Grid</h2>
      <p>Marketing Team - <span id="teamLeavePeriod"></span></p>
      
      <div class="team-leave-container">
        <div class="team-leave-header">
          <div class="team-leave-month" id="teamLeavePeriodDisplay"></div>
          <div class="team-leave-nav">
            <button class="monthly" onclick="showTimeframe('monthly')">Monthly</button>
            <button class="weekly" onclick="showTimeframe('weekly')">Weekly</button>
            <button class="prev3Months" onclick="showTimeframe('prev3Months')">Previous 3 Months</button>
            <button class="next3Months" onclick="showTimeframe('next3Months')">Next 3 Months</button>
            <button class="prev6Months" onclick="showTimeframe('prev6Months')">Previous 6 Months</button>
            <button class="next6Months" onclick="showTimeframe('next6Months')">Next 6 Months</button>
            <button class="annual" onclick="showTimeframe('annual')">Annual</button>
          </div>
        </div>
        
        <div class="team-leave-grid" id="teamLeaveGrid"></div>
        
        <div class="legend">
          <div class="legend-item">
            <div class="legend-color" style="background-color: #3498db;"></div>
            <span>Annual Leave</span>
          </div>
          <div class="legend-item">
            <div class="legend-color" style="background-color: #9b59b6;"></div>
            <span>Maternity Leave</span>
          </div>
          <div class="legend-item">
            <div class="legend-color" style="background-color: #e74c3c;"></div>
            <span>Sick Leave</span>
          </div>
          <div class="legend-item">
            <div class="legend-color" style="background-color: #2ecc71;"></div>
            <span>Family Leave</span>
          </div>
          <div class="legend-item">
            <div class="legend-color" style="background-color: #f39c12;"></div>
            <span>Pending Leave</span>
          </div>
          <div class="legend-item">
            <div class="legend-color" style="background-color: transparent; border: 2px dashed #666;"></div>
            <span>Overlapping Leave</span>
          </div>
        </div>
      </div>
      
      <h3>Key Overlap Periods</h3>
      <ul id="overlapPeriods"></ul>
      
      <h3>Team Leave Balance Overview</h3>
      <div class="leave-grid">
        <div class="leave-card">
          <h3>Annual Leave Utilization</h3>
          <div class="leave-stats">
            <div class="stat">
              <div class="stat-value">65%</div>
              <div class="stat-label">Used</div>
            </div>
            <div class="stat">
              <div class="stat-value">35%</div>
              <div class="stat-label">Remaining</div>
            </div>
          </div>
          <div class="progress-bar">
            <div class="progress" style="width: 65%"></div>
          </div>
          <p>Peak leave period: <span id="peakLeavePeriod"></span></p>
        </div>
        
        <div class="leave-card">
          <h3>Team Availability</h3>
          <div class="leave-stats">
            <div class="stat">
              <div class="stat-value">3/5</div>
              <div class="stat-label">Available</div>
            </div>
            <div class="stat">
              <div class="stat-value">2/5</div>
              <div class="stat-label">On Leave</div>
            </div>
          </div>
          <div class="progress-bar">
            <div class="progress" style="width: 60%"></div>
          </div>
          <p>Next week: 4/5 available</p>
        </div>
      </div>
    </div>
    
    <div class="policy-content" id="leaveContent">
      <h2>South Africa Leave Policy</h2>
      <p>Comprehensive guide to employee leave entitlements under South African labor law.</p>

      <h3>1. Annual Leave</h3>
      <p>Employees are entitled to 21 consecutive days of paid annual leave per year (equivalent to 15 working days). This leave must be taken within 6 months after the annual cycle ends and cannot be paid out unless employment is terminated.</p>

      <h3>2. Sick Leave</h3>
      <p>Employees earn 30 days of sick leave over a 3-year period (based on a 5-day work week). During the first 6 months of employment, they accumulate 1 day of sick leave for every 26 days worked. A medical certificate is required for absences exceeding 2 consecutive days or for frequent sick leave usage.</p>

      <h3>3. Maternity Leave</h3>
      <p>Pregnant employees are entitled to 4 consecutive months of unpaid leave, which may begin up to 4 weeks before the expected due date. By law, employees may not work for 6 weeks following childbirth. Partial income may be covered through UIF claims.</p>

      <h3>4. Family Responsibility Leave</h3>
      <p>Employees who have been employed for more than 4 months and work at least 4 days per week are entitled to 3 days of paid family responsibility leave per year. This applies to occasions such as childbirth, serious illness of an immediate family member, or death of a close family member.</p>

      <h3>5. Public Holidays</h3>
      <p>South Africa observes 12 public holidays annually. Employees are entitled to paid time off on these days unless required to work, in which case they must receive either double pay or an alternative paid day off.</p>

      <h3>6. Unpaid Leave</h3>
      <p>Not specifically governed by labor law. Employers may grant unpaid leave at their discretion when employees have exhausted their paid leave entitlements.</p>

      <h3>7. Special Leave</h3>
      <p>Additional leave types vary by company policy and may include provisions for study leave, religious observances, paternity leave, or other special circumstances.</p>

      <h3>8. Parental, Adoption, and Commissioning Parental Leave</h3>
      <ul>
        <li><strong>Parental Leave:</strong> 10 consecutive days unpaid leave (may be claimed from UIF) for parents not covered by maternity leave provisions.</li>
        <li><strong>Adoption Leave:</strong> 10 consecutive weeks for the primary caregiver or 10 consecutive days for the secondary caregiver when adopting a child under 2 years.</li>
        <li><strong>Commissioning Parental Leave:</strong> For parents using a surrogate - 10 consecutive weeks for the primary caregiver or 10 consecutive days for the secondary caregiver.</li>
      </ul>

      <h3>Summary Table</h3>
      <table>
        <thead>
          <tr>
            <th>Type of Leave</th>
            <th>Entitlement</th>
            <th>Paid?</th>
            <th>Conditions</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>Annual Leave</td><td>15 working days/year</td><td>Yes</td><td>After 12 months continuous employment</td></tr>
          <tr><td>Sick Leave</td><td>30 days in 3 years</td><td>Yes</td><td>Medical certificate required for >2 days</td></tr>
          <tr><td>Maternity Leave</td><td>4 months</td><td>No</td><td>UIF benefits may apply</td></tr>
          <tr><td>Family Responsibility</td><td>3 days/year</td><td>Yes</td><td>4+ months service required</td></tr>
          <tr><td>Parental Leave</td><td>10 days</td><td>No</td><td>UIF claimable</td></tr>
          <tr><td>Adoption Leave</td><td>10 weeks or 10 days</td><td>No</td><td>Child must be under 2 years</td></tr>
          <tr><td>Public Holidays</td><td>12/year</td><td>Yes</td><td>Paid day off or double pay if working</td></tr>
          <tr><td>Unpaid Leave</td><td>As needed</td><td>No</td><td>Subject to employer approval</td></tr>
        </tbody>
      </table>
    </div>
    
    <div class="policy-content" id="bceaContent">
      <h2>Basic Conditions of Employment Act (BCEA)</h2>
      <p>Content about BCEA would appear here...</p>
    </div>
    
    <div class="policy-content" id="lraContent">
      <h2>Labour Relations Act (LRA)</h2>
      <p>Content about LRA would appear here...</p>
    </div>
    
    <div class="policy-content" id="eeaContent">
      <h2>Employment Equity Act (EEA)</h2>
      <p>Content about EEA would appear here...</p>
    </div>
    
    <div class="policy-content" id="ohsaContent">
      <h2>Occupational Health and Safety Act (OHSA)</h2>
      <p>Content about OHSA would appear here...</p>
    </div>
    
    <div class="policy-content" id="uiaContent">
      <h2>Unemployment Insurance Act</h2>
      <p>Content about UIA would appear here...</p>
    </div>
    
    <div class="policy-content" id="companyContent">
      <h2>Company-specific Policies</h2>
      <p>Content about company-specific policies would appear here...</p>
    </div>
    
    <div class="policy-content" id="summaryContent">
      <h2>Summary: What Employees Should Know</h2>
      <p>Content about summary would appear here...</p>
    </div>
    
    <div class="policy-content" id="privacyContent">
      <h2>Privacy Policy</h2>
      <p><strong>Effective Date:</strong> <span id="privacyDate"></span></p>

      <div class="notice">
        <p>This Privacy Policy complies with:</p>
        <span class="compliance-badge" aria-label="General Data Protection Regulation">GDPR</span>
        <span class="compliance-badge" aria-label="California Consumer Privacy Act">CCPA</span>
        <span class="compliance-badge" aria-label="Protection of Personal Information Act">POPIA</span>
        <span class="compliance-badge" aria-label="Personal Data Protection Act">PDPA</span>
      </div>

      <h3>1. Information Collection</h3>
      <p>We collect data through lawful bases including consent (Article 6 GDPR), contractual necessity, and legitimate interests:</p>
      <ul>
        <li><strong>Identifiers:</strong> Name, email, phone number, employee ID</li>
        <li><strong>Professional Data:</strong> Job title, department, reporting structure</li>
        <li><strong>Technical Data:</strong> IP addresses, device fingerprints, browser metadata</li>
        <li><strong>Performance Data:</strong> Goals, reviews, competency assessments</li>
        <li><strong>Sensitive Data:</strong> Only collected with explicit consent per Article 9 GDPR</li>
      </ul>

      <h3>2. Data Usage & Legal Basis</h3>
      <p>Processing activities and their legal justifications:</p>
      <ul>
        <li><strong>Contract Performance:</strong> Service delivery, account management</li>
        <li><strong>Legitimate Interests:</strong> Security monitoring, product improvement</li>
        <li><strong>Legal Obligations:</strong> Tax compliance, regulatory reporting</li>
        <li><strong>Consent:</strong> Marketing communications, data sharing</li>
      </ul>

      <h3>3. International Data Transfers</h3>
      <p>We implement appropriate safeguards for cross-border transfers:</p>
      <ul>
        <li>EU-US Data Privacy Framework certification</li>
        <li>Standard Contractual Clauses (SCCs)</li>
        <li>Binding Corporate Rules (BCRs)</li>
      </ul>

      <h3>4. Data Subject Rights</h3>
      <p>Exercise your rights via our <a href="/data-request">Data Rights Portal</a>:</p>
      <ul>
        <li>Access & Portability (Articles 15 & 20 GDPR)</li>
        <li>Rectification & Erasure (Articles 16 & 17 GDPR)</li>
        <li>Restriction & Objection (Articles 18 & 21 GDPR)</li>
        <li>Opt-out of Sale/Sharing (CCPA 1798.120)</li>
        <li>Non-Discrimination (CCPA 1798.125)</li>
      </ul>

      <h3>5. Security Measures</h3>
      <p>We maintain ISO 27001 certification and implement:</p>
      <ul>
        <li>AES-256 encryption at rest and in transit</li>
        <li>Annual penetration testing</li>
        <li>Role-based access controls</li>
        <li>Breach notification procedures (Article 33 GDPR)</li>
      </ul>

      <h3>6. Third-Party Disclosures</h3>
      <p>Data processors with DPAs in place:</p>
      <ul>
        <li><strong>Cloud Hosting:</strong> AWS (EU/US regions)</li>
        <li><strong>Analytics:</strong> Google Analytics 4 (IP anonymization enabled)</li>
        <li><strong>Communication:</strong> Twilio (message routing)</li>
      </ul>

      <h3>7. Data Retention Schedule</h3>
      <p>Retention periods based on data category:</p>
      <ul>
        <li>Account Data: 6 years post-termination</li>
        <li>Performance Records: 10 years</li>
        <li>Log Data: 12 months</li>
      </ul>

      <h3>8. Children's Privacy</h3>
      <p>We do not knowingly collect data from individuals under 16 (13 in US) without parental consent (COPPA compliance).</p>

      <h3>9. Policy Updates</h3>
      <p>We will notify users of material changes via:</p>
      <ul>
        <li>In-app banners</li>
        <li>Email notifications</li>
        <li>Version tracking in document footer</li>
      </ul>

      <h3>10. Dispute Resolution</h3>
      <p>Contact our Data Protection Officer first:</p>
      <p><strong>DPO:</strong> Jane Smith<br>
      Email: <a href="mailto:dpo@itbs.com">dpo@itbs.com</a><br>
      Phone: +27 21 123 4567</p>

      <p>For unresolved issues, contact your local supervisory authority or use binding arbitration through JAMS.</p>

      <nav aria-label="Policy navigation">
        <a href="/terms" style="position:fixed;bottom:20px;right:20px;background:var(--primary);color:white;padding:10px;border-radius:5px;">
          <i class="fas fa-balance-scale"></i> View Terms
        </a>
      </nav>
    </div>
  </div>

  <script>
    // Date formatting function
    const formatDate = (date) => {
      return date.toLocaleDateString('en-ZA', {
        year: 'numeric',
        month: 'long',
        day: 'numeric'
      });
    };

    // Leave data with pending status
    const leaveData = [
      {
        name: "Sarah Johnson",
        leaves: [
          { type: "leave-annual", start: new Date('2025-04-10'), end: new Date('2025-04-14'), label: "Annual", status: "approved" },
          { type: "leave-sick", start: new Date('2025-06-01'), end: new Date('2025-06-03'), label: "Sick", status: "approved" }
        ]
      },
      {
        name: "Lisa Brown",
        leaves: [
          { type: "leave-maternity", start: new Date('2025-04-05'), end: new Date('2025-07-21'), label: "Maternity", status: "approved" }
        ]
      },
      {
        name: "You",
        leaves: [
          { type: "leave-annual", start: new Date('2025-07-15'), end: new Date('2025-07-19'), label: "Annual", status: "approved" },
          { type: "leave-family", start: new Date('2025-09-25'), end: new Date('2025-09-27'), label: "Family", status: "pending" }
        ]
      },
      {
        name: "Michael Chen",
        leaves: [
          { type: "leave-annual", start: new Date('2025-08-07'), end: new Date('2025-08-11'), label: "Annual", status: "approved" }
        ]
      },
      {
        name: "David Wilson",
        leaves: [
          { type: "leave-annual", start: new Date('2025-09-04'), end: new Date('2025-09-15'), label: "Annual", status: "pending" }
        ]
      }
    ];

    let currentTimeframe = 'monthly';
    let currentDate = new Date('2025-07-10');

    function generateTeamLeaveGrid(timeframe) {
      const teamLeaveGrid = document.getElementById('teamLeaveGrid');
      teamLeaveGrid.innerHTML = '';

      let startDate, endDate, periodLabel;
      const today = new Date('2025-07-10');

      // Determine timeframe boundaries
      if (timeframe === 'monthly') {
        startDate = new Date(today.getFullYear(), today.getMonth(), 1);
        endDate = new Date(today.getFullYear(), today.getMonth() + 1, 0);
        periodLabel = `${formatDate(startDate)} - ${formatDate(endDate)}`;
      } else if (timeframe === 'weekly') {
        const startOfWeek = new Date(today);
        startOfWeek.setDate(today.getDate() - today.getDay());
        startDate = new Date(startOfWeek);
        endDate = new Date(startOfWeek);
        endDate.setDate(startOfWeek.getDate() + 6);
        periodLabel = `${formatDate(startDate)} - ${formatDate(endDate)}`;
      } else if (timeframe === 'prev3Months') {
        startDate = new Date(today.getFullYear(), today.getMonth() - 3, 1);
        endDate = new Date(today.getFullYear(), today.getMonth(), 0);
        periodLabel = `${formatDate(startDate)} - ${formatDate(endDate)}`;
      } else if (timeframe === 'next3Months') {
        startDate = new Date(today.getFullYear(), today.getMonth(), 1);
        endDate = new Date(today.getFullYear(), today.getMonth() + 3, 0);
        periodLabel = `${formatDate(startDate)} - ${formatDate(endDate)}`;
      } else if (timeframe === 'prev6Months') {
        startDate = new Date(today.getFullYear(), today.getMonth() - 6, 1);
        endDate = new Date(today.getFullYear(), today.getMonth(), 0);
        periodLabel = `${formatDate(startDate)} - ${formatDate(endDate)}`;
      } else if (timeframe === 'next6Months') {
        startDate = new Date(today.getFullYear(), today.getMonth(), 1);
        endDate = new Date(today.getFullYear(), today.getMonth() + 6, 0);
        periodLabel = `${formatDate(startDate)} - ${formatDate(endDate)}`;
      } else if (timeframe === 'annual') {
        startDate = new Date(today.getFullYear(), 0, 1);
        endDate = new Date(today.getFullYear(), 11, 31);
        periodLabel = `${today.getFullYear()} Annual View`;
      }

      // Calculate days to display
      const days = Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24)) + 1;
      const maxDays = timeframe === 'weekly' ? 7 : timeframe === 'monthly' ? 31 : timeframe.includes('3Months') ? 90 : timeframe.includes('6Months') ? 180 : 365;
      const displayDays = Math.min(days, maxDays);

      // Update period display
      document.getElementById('teamLeavePeriod').textContent = periodLabel;
      document.getElementById('teamLeavePeriodDisplay').textContent = periodLabel;

      // Update active button
      const navButtons = document.querySelectorAll('.team-leave-nav button');
      navButtons.forEach(button => {
        button.classList.remove('active');
        if (button.onclick.toString().includes(timeframe)) {
          button.classList.add('active');
        }
      });

      // Generate date headers
      const headerRow = document.createElement('div');
      headerRow.innerHTML = '<div class="team-leave-day-header">Employee</div>';
      let currentMonth = null;
      for (let i = 0; i < displayDays; i++) {
        const date = new Date(startDate);
        date.setDate(startDate.getDate() + i);
        const month = date.getMonth();
        const isNewMonth = currentMonth !== month && i > 0;
        currentMonth = month;
        headerRow.innerHTML += `<div class="team-leave-date-header${isNewMonth ? ' month-divider' : ''}">${formatDate(date)}</div>`;
      }
      teamLeaveGrid.appendChild(headerRow);

      // Generate employee rows
      leaveData.forEach(employee => {
        const row = document.createElement('div');
        row.className = 'team-leave-employee-row';
        row.innerHTML = `<div class="team-leave-employee-name">${employee.name}</div>`;

        for (let i = 0; i < displayDays; i++) {
          const currentDate = new Date(startDate);
          currentDate.setDate(startDate.getDate() + i);
          let cellContent = '';
          let cellClass = 'team-leave-box';

          const leave = employee.leaves.find(l => 
            currentDate >= l.start && currentDate <= l.end
          );
          const isOverlap = leaveData.filter(e => e.name !== employee.name).some(e => 
            e.leaves.some(l => currentDate >= l.start && currentDate <= l.end)
          );

          if (leave) {
            const leaveClass = leave.status === 'pending' ? 'leave-pending' : leave.type;
            cellContent = `<span class="leave-block ${leaveClass}" onclick="alert('${formatDate(currentDate)}:\\nMaternity\\nMaternity\\nMaternity\\nMaternity\\nMaternity\\nMaternity\\nMaternity')">${leave.label}</span>`;
            if (isOverlap) cellClass += ' leave-overlap';
          }

          row.innerHTML += `<div class="${cellClass}">${cellContent}</div>`;
        }
        teamLeaveGrid.appendChild(row);
      });

      // Generate overlap periods
      const overlapPeriods = document.getElementById('overlapPeriods');
      overlapPeriods.innerHTML = '';
      const overlapDates = [];
      for (let i = 0; i < displayDays; i++) {
        const currentDate = new Date(startDate);
        currentDate.setDate(startDate.getDate() + i);
        const employeesOnLeave = leaveData
          .filter(employee => 
            employee.leaves.some(leave => 
              currentDate >= leave.start && currentDate <= leave.end
            )
          )
          .map(employee => {
            const leave = employee.leaves.find(l => 
              currentDate >= l.start && currentDate <= l.end
            );
            return `${employee.name} (${leave.label}${leave.status === 'pending' ? ' - Pending' : ''})`;
          });
        if (employeesOnLeave.length > 1) {
          const existingPeriod = overlapDates.find(period => 
            period.start.toDateString() === currentDate.toDateString()
          );
          if (!existingPeriod) {
            overlapDates.push({
              start: currentDate,
              end: currentDate,
              employees: employeesOnLeave
            });
          } else {
            existingPeriod.end = currentDate;
            existingPeriod.employees = [...new Set([...existingPeriod.employees, ...employeesOnLeave])];
          }
        }
      }

      overlapDates.forEach(period => {
        const li = document.createElement('li');
        li.innerHTML = `<strong>${formatDate(period.start)}${period.start.toDateString() === period.end.toDateString() ? '' : ` - ${formatDate(period.end)}`}:</strong> ${period.employees.join(' and ')} on leave`;
        overlapPeriods.appendChild(li);
      });
    }

    function showTimeframe(timeframe) {
      currentTimeframe = timeframe;
      generateTeamLeaveGrid(timeframe);
    }

    function showPolicy(policyId) {
      const allContents = document.querySelectorAll('.policy-content');
      allContents.forEach(content => {
        content.style.display = 'none';
      });
      
      document.getElementById('policyBrief').style.display = 'none';
      
      document.getElementById(policyId + 'Content').style.display = 'block';
      
      const allButtons = document.querySelectorAll('.sidebar button');
      allButtons.forEach(button => {
        button.classList.remove('active');
      });
      if (event && event.target) {
        event.target.classList.add('active');
      }

      if (policyId === 'teamLeave') {
        generateTeamLeaveGrid(currentTimeframe);
      }
    }

    // Set Privacy Policy date
    document.getElementById('privacyDate').textContent = formatDate(new Date());

    // Set Leave Balance dates
    document.getElementById('annualLeaveAccrualDate').textContent = formatDate(new Date('2025-08-15'));
    document.getElementById('sickLeaveResetDate').textContent = formatDate(new Date('2026-01-01'));

    // Set Your Upcoming Leave dates
    document.getElementById('yourLeaveDate1').textContent = `${formatDate(new Date('2025-07-15'))} - ${formatDate(new Date('2025-07-19'))}`;
    document.getElementById('yourLeaveDate2').textContent = `${formatDate(new Date('2025-09-25'))} - ${formatDate(new Date('2025-09-27'))}`;

    // Set Peak Leave Period
    document.getElementById('peakLeavePeriod').textContent = formatDate(new Date('2025-12-01'));

    // Initialize team leave grid
    generateTeamLeaveGrid(currentTimeframe);
  </script>
</body>
</html>